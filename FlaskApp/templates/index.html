<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Monitor OctoPrint</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/static/css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="/static/css/style.min.css" rel="stylesheet">

     <!-- JQuery -->
    <script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="/static/js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="/static/js/mdb.min.js"></script>

   <script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>


<!-- <script>
     $.get("/update", function(data) { 
      var refreshId = setInterval(function(){
      $("#pruebaDiv").load(data)
        }, 10000 );
  });
    
</script>  -->


<!--     <script>
      $(document).ready(function() {
       $.ajax(url_for('/')).done(function (reply) {
              $('pruebaDiv').html(reply);
        }, 5000);
      });

</script> -->

    <script type="text/javascript">
      setTimeout(function(){
      window.location.reload(1);
    }, 10000000);

    </script>

<!--     <script>
  $.get("/", function(data) { 
      //data contains the response data. update a div to contain the data, or do something else.
      $("#pruebaDiv").html(data);
  });
    
</script> -->


<!--    <script>
  $(document).ready(function(data) { 
      var refreshId = setInterval(function(){
      $("#pruebaDiv").html(data);//actualizas el div
        }, 5000 );
      //data contains the response data. update a div to contain the data, or do something else. 
  });
    
</script>  -->



<!-- <script type="text/javascript">
  $(document).ready(function() { 
  $("#pruebaDiv").load("update");
});
</script> -->


  
</head>


    <!--Main Navigation-->
     <header>
            <!-- Navbar -->
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark  scrolling-navbar">
                <div class="container">

                    <!-- Brand -->
                    <a class="navbar-brand waves-effect" href="http://abadiatecnologica.es/" target="_blank"><strong>Abadía Tecnológica</strong></a>


                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                     <!-- Links -->
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link  waves-effect" href="#">Witbox Negra</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link  waves-effect" href="#">Witbox Amarilla</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link waves-effect" href="#">Witbox Blanca</a>
                            </li>
                             <li class="nav-item">
                                <a class="nav-link waves-effect" href="#">Replicator 2</a>
                            </li>
                             <li class="nav-item">
                                <a class="nav-link waves-effect" href="#">i3 Steel</a>
                            </li>
                             <li class="nav-item">
                                <a class="nav-link waves-effect" href="#">Sirius</a>
                            </li>
                             <li class="nav-item">
                                <a class="nav-link waves-effect" href="#">BlackBelt</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
              

         </div>
     </section>
            <!--Intro Section-->
    
                    <div class="container flex-center">
                        <div class="d-flex align-items-center content-height">
                            <div class="row flex-center pt-5 mt-3">
                            </div>
                        </div>
                    </div>
             </div>
         </section>

        </header>
    <!--Main Navigation-->
	
 
              <div class="container">
              </div>
    <!--Main layout-->
     <body id="body">


 						&nbsp;

        <div class="container">
            <!--Section: Cards-->
            <section class="text-center">

                <!--Grid row-->
                <div class="row mb-4 wow fadeIn">

                    <!--Grid column-->
                    <div class="col-lg-3 col-md-12 mb-3">

<!--Primera Impresora -->
                      <!--Card-->
                        <div  class="card">

                            <!--Card image-->
                            
                            <!--Card content-->
                            <div  class="card">


            {% if datosJob["maq1"] %}
            {% if datosJob["maq1"]["Estado"] == "Operational"%}
              <div id="gradOperativa" class="card">
                 <h4 class="card">
                <a href={{nombresMaquinas["maq1"]["direccion"]}} style = "color:black">{{nombresMaquinas["maq1"]["Nombre"]}}</a>
              </h4>
            {% elif datosJob["maq1"]["Estado"] == "Printing" %}
              <div id="gradImprime" class="card">
                   <h4 class="card">
                <a href={{nombresMaquinas["maq1"]["direccion"]}} style = "color:black">{{nombresMaquinas["maq1"]["Nombre"]}}</a>
              </h4>
            {% else %}
              <div id="gradError" class="card">
                   <h4 class="card">
                <a href={{nombresMaquinas["maq1"]["direccion"]}} style = "color:black">{{nombresMaquinas["maq1"]["Nombre"]}}</a>
              </h4>
            {% endif %} 

              {% for element in datosFiles["maq1"] %}
                  <!--pre>{{element}}</pre-->
              {% endfor %}   

             {% if datosJob["maq1"]["Estado"] == "Operational"%}
                 <a href=/desconectar?maq=1  style= <button class="buttonDisconnect"><i class="fa fa-toggle-off" style="font-size:24px"></i></button></a>
             {% elif datosJob["maq1"]["Estado"] == "Printing" %}
                 <a href=/desconectar?maq=1  style= <button class="buttonDisconnect"><i class="fa fa-toggle-off" style="font-size:24px"></i></button></a>
             {% else %}
                 <a href=/conectar?maq=1  style= <button class="buttonConnect"><i class="fa fa-toggle-on" style="font-size:24px"></i></button></a>
             {% endif %} 
          
            
              
               {% if datosJob["maq1"] %}
                  <!--pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Tiempo estimado de impresion: {{datosJob["maq1"]["TiempoEstimadoImpresion"]}}</pre-->
                 {% if datosJob["maq1"] %}
                  <!--pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Tiempo estimado de impresion: {{datosJob["maq1"]["TiempoEstimadoImpresion"]}}</pre-->
                  <p>   </p>
                  <pre> <i class="fa fa-plug"  style="font-size: 24px"></i> : {{datosJob["maq1"]["Estado"]}}</pre>
                  {% if datosJob["maq1"]["TiempoUltimaImpresion"] == 'None' %}
                    <pre> <i class="fa fa-clock-o iconos"></i> Ultima:</pre>
                  {% else %}
                    <pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Ultima: {{datosJob["maq1"]["TiempoUltimaImpresion"]}}</pre>
                  {% endif %}
                  
                  {% if datosJob["maq1"]["Nombre"] == 'None' %}
                      <pre> <i class="fa fa-archive" style="font-size:24px"></i></pre>
                  {% else %}
                       <pre> <i class="fa fa-archive" style="font-size:24px"></i> :<span style="font-size: 12px">{{datosJob["maq1"]["Nombre"][:30]}} </span></pre>
                  {% endif %}     
                  {% if datosJob["maq1"]["Porcentaje"] == 'None'%}
                      <pre> <i class="fa fa-percent" style="font-size:24px"></i></pre>
                  {% elif datosJob["maq1"]["Porcentaje"] == '100' %}
                      <div id="progressBar">

                        <div id="progress-bar"  role="progressbar"  aria-valuemin="0" aria-valuemax="100" style="width:{{datosJob["maq1"]["Porcentaje"]}}%">
                        {{datosJob["maq1"]["Porcentaje"][:3]}}%
                        </div>
                      </div>
                  {% else %}

                    <div id="progressBar">

                        <div id="progress-bar"  role="progressbar"  aria-valuemin="0" aria-valuemax="100" style="width:{{datosJob["maq1"]["Porcentaje"]}}%">
                        {{datosJob["maq1"]["Porcentaje"][:4]}}%
                        </div>
                      </div>
                      <pre></pre>
                 {% endif %} 

                {% endif %}     
                  <!--pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Tiempo de impresion: {{datosJob["maq1"]["TiempoImpresion"]}}</pre-->
                  {% if datosJob["maq1"]["TiempoRestante"] == 'None' %}

                      <pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Restante: </pre>
                  {% else %}
                      <pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Restante: {{datosJob["maq1"]["TiempoRestante"]}} </pre>
                  {% endif %}
                   
                {% else %}
                  <pre> Impresora no conectada </pre>

                {% endif %}   


                {% if datosPrinter["maq1"] %}
                  <!--pre> <i class="fa fa-pause" style="font-size:24px"></i> Pausa: {{datosPrinter["maq1"]["Pausa"]}}</pre-->
                  <!--pre> <i class="fa fa-clock-o" style="font-size:24px"></i> Imprimiendo: {{datosPrinter["maq1"]["Imprimiendo"]}}</pre-->
                  <!--pre> <i class="fa fa-check" style="font-size:24px"></i> Lista: : {{datosPrinter["maq1"]["Lista"]}}</pre-->
                  <!--pre> <i class="fa fa-plug" style="font-size:24px"></i> Estado: {{datosPrinter["maq1"]["Estado"]}}</pre-->
                  <!--pre>Temperatura actual de la cama: {{datosPrinter["maq1"]["TempCamaActual"]}}</pre>
                  <pre>Temperatura fijada de la cama: {{datosPrinter["maq1"]["TempCamaFijada"]}}</pre-->
                  
                  <pre> <i class="fa fa-thermometer" style="font-size:24px"></i> Extrusor: {{datosPrinter["maq1"]["TempHottendActual"]}} / {{datosPrinter["maq1"]["TempHottendFijada"]}} º C</pre>
                  <!--pre> <i class="fa fa-thermometer-empty" style="font-size:24px"></i> Temperatura fijada del extrusor: {{datosPrinter["maq1"]["TempHottendFijada"]}}</pre-->  
                {% else %}
                  <pre> Impresora no conectada </pre>

                {% endif %}    
            
              {{fallos["maq1"]}}
           
            <div class="card-body">
             
              <!--p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet numquam aspernatur eum quasi sapiente nesciunt? Voluptatibus sit, repellat sequi itaque deserunt, dolores in, nesciunt, illum tempora ex quae? Nihil, dolorem!</p-->
            </div>
          </div>
          {% else %}
          <div style="background-color:#FF7043; class="card h-100">
               
                    
                  <div class="card-body">
                     <h4 class="card-title">
                <a href={{nombresMaquinas["maq1"]["direccion"]}} style = "color:black">{{nombresMaquinas["maq1"]["Nombre"]}}</a>
              </h4>
                    <pre>No hay OctoPrint</pre>
        
          </div>
          </div>
          {% endif %}
                            </div>

                        </div>
                        <!--/.Card-->

                    </div>
                    <!--Grid column-->


<!-- Octava Impresora (futuro) -->

 <!-- Acaban las impresoras -->       

                <!--Grid row-->

            <!--Section: Cards-->

        </div>

    </main>
    <!-- Div del container -->
</div>
    <!--Main layout-->
</body>

    <!--Footer-->

    <footer id="footer">

        <hr class="my-2">

        <!--Copyright-->
        <div class="footer-copyright py-1">
            <span id="copyleft">&copy;</span>
            <span>Copyleft: </span>
            <a style="color: white" href="http://abadiatecnologica.es"> Abadía Tecnológica </a>
        </div>
        <!--/.Copyright-->

    </footer>
    <!--/.Footer-->

    <!-- SCRIPTS -->
   
    <!-- Initializations -->
    <style type="text/css">

    #body{
  		background-image: linear-gradient(to bottom, #ADA996 , #EAEAEA);
	}


  #footer{
      position: fixed;
      bottom: 0;
      color:#fff;
      background-color: rgb(75, 75, 75);
      text-align: center;
      font-size: 90%;
      width: 100%;
      height: 6%;

  }
	#copyleft {
  		display:inline-block;
  		transform: rotate(180deg);
	}

    #gradOperativa {
  		background-image: linear-gradient(to right, #52c234 , #52c234);
	}

    #gradError {
  		background-image: linear-gradient(to right, #D31027 , #D31027 );
	}

    #gradImprime {
  		background-image: linear-gradient(to right,#0082c8, #0082c8);
	}

  #preArchivos {
	   font-family: "courier new", courier, monospace;
	   font-size: 11px;
  }
	#progressBar {
	  display: -ms-flexbox;
	  display: flex;
	  height: 0.75rem;
	  overflow: hidden;
	  font-size: 0.85rem;
	  background-color: #e9ecef;
	  border-radius: 1rem;
	  margin-left:10px;
	  margin-right:10px;
	}

	#progress-bar {
	  display: -ms-flexbox;
	  display: flex;
	  -ms-flex-direction: column;
	  flex-direction: column;
	  -ms-flex-pack: center;
	  justify-content: center;
	  color: #fff;
	  text-align: center;
	  white-space: nowrap;
	  background-color: #006064;
	  transition: width 0.6s ease;
	}
</style>

</body>
</html>